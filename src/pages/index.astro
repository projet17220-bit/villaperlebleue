---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Calendar from '../components/Calendar.astro';
import BookingForm from '../components/BookingForm.astro';
import LangToggle from '../components/LangToggle.astro';

const lang = Astro.url.searchParams.get('lang') || 'fr';
const t = await import(`./${lang}.json`).then(m => m.default);

const indisponibles = [
  '2026-02-14', '2026-02-15', '2026-02-20'  // Ã‰ditez manuellement vos dates booked
];
---

<Layout titre={t.title} lang={lang}>
  <LangToggle current={lang} client:load />

  <!-- Hero Airbnb-style -->
  <section class="relative h-screen bg-cover bg-center" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('/images/perle-bleue-piscine.jpg');">
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4">
      <h1 class="text-5xl md:text-7xl font-bold mb-6 drop-shadow-lg">{t.title}</h1>
      <p class="text-xl md:text-2xl mb-8 max-w-2xl">{t.hero_desc}</p>
      <div class="bg-white/20 backdrop-blur p-6 rounded-2xl">
        <p class="text-3xl font-bold">{t.prix}</p>
      </div>
    </div>
  </section>

  <!-- Sections Ã©quipements (style Airbnb cards) -->
  <div class="max-w-6xl mx-auto px-4 py-16 space-y-16">
    <section>
      <h2 class="text-4xl font-bold text-center mb-12">{t.confort}</h2>
      <p class="text-center max-w-4xl mx-auto mb-12 text-lg">{t.confort_details}</p>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        {t.confort_list.map((item, i) => (
          <div class="p-6 bg-white rounded-2xl shadow-lg border hover:shadow-2xl transition-all">
            <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-4">
              <span class="text-white font-bold">ðŸ“º</span>  <!-- IcÃ´nes adaptÃ©es -->
            </div>
            <p>{item}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Autres sections similaires : exterieur, chambres, etc. (rÃ©pÃ©tez pattern) -->
    <section id="exterieur">
      <h2 class="text-4xl font-bold text-center mb-12">{t.exterieur}</h2>
      <!-- MÃªme grid pour t.exterieur_list avec icÃ´nes ðŸŠâ€â™‚ï¸ etc. -->
    </section>

    <!-- DisponibilitÃ©s : Calendrier mensuel Airbnb-like -->
    <section>
      <h2 class="text-4xl font-bold text-center mb-12">{t.dispo}</h2>
      <Calendar indisponibles={indisponibles} lang={lang} mois={[{year:2026, month:2}, {year:2026, month:3}]} client:load />
    </section>

    <!-- RÃ¨gles & Location (grids) -->
    <!-- ... Ajoutez sections rÃ¨gles, location avec grids -->

    <!-- RÃ©servation -->
    <section class="text-center">
      <h2 class="text-4xl font-bold mb-12">{t.resa}</h2>
      <BookingForm lang={lang} />
      <div class="mt-8 p-6 bg-yellow-50 rounded-2xl max-w-2xl mx-auto">
        <h3 class="font-bold mb-2">Conditions :</h3>
        <p>{t.annulation}</p>
        <p>{t.paiement}</p>
      </div>
    </section>
  </div>
</Layout>
