---
const lang = Astro.url.searchParams.get('lang') || 'fr';

// JSON STATIQUES EMBARQUÃ‰S (zÃ©ro import = build parfait)
const t = lang === 'fr' ? {
  title: "Villa La Perle Bleue",
  hero_desc: "SÃ©journez dans une villa moderne et paisible prÃ¨s de La Rochelle. Jusqu'Ã  10 personnes.",
  prix: "Ã€ partir de 350â‚¬/nuit (min. 3 nuits - contactez pour devis)",
  dispo: "DisponibilitÃ©s",
  resa: "Demander une rÃ©servation",
  annulation: "Annulation gratuite jusqu'Ã  30 jours avant. 50% de frais ensuite.",
  paiement: "Paiement par virement bancaire aprÃ¨s validation manuelle.",
  confort: "Confort & divertissement",
  exterieur: "Espace extÃ©rieur",
  chambres: "4 chambres confortables",
  cuisine: "Cuisine & espaces communs",
  regles: "RÃ¨gles maison",
  location: "Situation idÃ©ale",
  confort_details: "Villa neuve 160 mÂ², hauteur 3,30 m, MeublÃ© de Tourisme. Tout fourni: linge, kit accueil, cafÃ©, produits essentiels.",
  airbnb: "Voir aussi sur Airbnb"
} : {
  title: "Villa La Perle Bleue",
  hero_desc: "Modern peaceful villa near La Rochelle. Up to 10 guests.",
  prix: "From 350â‚¬/night (min. 3 nights - contact for quote)",
  dispo: "Availability",
  resa: "Request booking",
  annulation: "Free cancellation up to 30 days. 50% fee after.",
  paiement: "Bank transfer after manual approval.",
  confort: "Comfort & entertainment",
  exterieur: "Outdoor space",
  chambres: "4 comfortable bedrooms",
  cuisine: "Kitchen & common areas",
  regles: "House rules",
  location: "Perfect location",
  confort_details: "New 160 mÂ² villa, 3.3m ceilings. Fully equipped: linen, welcome kit, coffee supplies.",
  airbnb: "Also on Airbnb"
};

const indisponibles = ['2026-02-14','2026-02-15','2026-02-20']; // Ã‰ditez vos dates
---

<!doctype html>
<html lang={lang}>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>{t.title}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">
  
  <!-- Lang Toggle -->
  <nav class="fixed top-6 right-6 z-50 bg-white/95 backdrop-blur-md shadow-lg rounded-2xl p-2 border">
    <a href="?lang=fr" class={`px-4 py-2 rounded-xl font-semibold ${lang === 'fr' ? 'bg-blue-600 text-white shadow-md' : 'hover:bg-gray-100 text-gray-700'}`}>FR</a>
    <a href="?lang=en" class={`px-4 py-2 rounded-xl font-semibold ml-1 ${lang === 'en' ? 'bg-blue-600 text-white shadow-md' : 'hover:bg-gray-100 text-gray-700'}`}>EN</a>
  </nav>

  <!-- Hero Airbnb-style -->
  <section class="relative h-screen bg-gradient-to-b from-blue-900 to-blue-600 bg-cover bg-center" 
           style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('https://via.placeholder.com/1920x1080/blue/ffffff?text=Piscine+Villa');">
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4">
      <h1 class="text-5xl md:text-7xl font-bold mb-6 drop-shadow-2xl">{t.title}</h1>
      <p class="text-xl md:text-2xl mb-8 max-w-2xl leading-relaxed">{t.hero_desc}</p>
      <div class="bg-white/20 backdrop-blur-xl p-8 rounded-3xl shadow-2xl">
        <p class="text-4xl font-bold mb-2">{t.prix}</p>
        <a href="#resa" class="bg-white text-blue-600 px-8 py-4 rounded-2xl font-bold text-xl hover:bg-opacity-90 transition-all">RÃ©server</a>
      </div>
    </div>
  </section>

  <main class="max-w-6xl mx-auto px-4 py-20 space-y-20">
    
    <!-- Confort -->
    <section>
      <h2 class="text-4xl font-bold text-center mb-12">{t.confort}</h2>
      <p class="text-center max-w-4xl mx-auto mb-12 text-xl text-gray-700">{t.confort_details}</p>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all">ðŸ“º Streaming illimitÃ©</div>
        <div class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all">ðŸ“¶ WiFi 450 Mb/s</div>
        <div class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all">ðŸš— Parking + garage</div>
        <div class="p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all">âš½ Baby-foot & ping-pong</div>
      </div>
    </section>

    <!-- Calendrier -->
    <section id="dispo">
      <h2 class="text-4xl font-bold text-center mb-12">{t.dispo}</h2>
      <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
        <!-- FÃ©vrier 2026 -->
        <div class="bg-white rounded-2xl shadow-lg p-8">
          <h3 class="text-2xl font-bold mb-6 text-center">FÃ©vrier 2026</h3>
          <div class="grid grid-cols-7 gap-2 mb-4">
            {['L','M','M','J','V','S','D'].map(j => (
              <div class="font-bold p-3 text-sm text-gray-500 text-center uppercase">{j}</div>
            ))}
            {[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28].map(j => {
              const booked = ['14','15','20'].includes(j.toString());
              return (
                <div class={`p-4 rounded-xl h-20 text-lg font-semibold transition-all hover:scale-110 cursor-pointer ${
                  booked ? 'bg-red-200 text-red-600 line-through' : 'bg-green-100 hover:bg-green-200 text-green-800'
                }`}>
                  {j}
                </div>
              );
            })}
          </div>
        </div>
        <!-- Ajoutez autres mois ici -->
      </div>
    </section>

    <!-- RÃ©servation -->
    <section id="resa" class="text-center py-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl">
      <h2 class="text-5xl font-bold mb-12">{t.resa}</h2>
      
      <form name="reservation" method="POST" netlify data-netlify="true" class="max-w-lg mx-auto space-y-6 mb-12">
        <input type="hidden" name="form-name" value="reservation" />
        <input type="text" name="nom" placeholder="Nom complet *" required class="w-full p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-200 focus:border-blue-500" />
        <div class="grid grid-cols-2 gap-4">
          <input type="email" name="email" placeholder="Email *" required class="p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-200" />
          <input type="tel" name="tel" placeholder="TÃ©lÃ©phone" class="p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-200" />
        </div>
        <div class="grid grid-cols-2 gap-4">
          <input type="date" name="checkin" required class="p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-200" />
          <input type="date" name="checkout" required class="p-5 border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-200" />
        </div>
        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-6 px-8 rounded-2xl font-bold text-xl shadow-xl hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300">
          {t.resa}
        </button>
      </form>
      
      <div class="bg-yellow-50 p-8 rounded-2xl max-w-2xl mx-auto">
        <h3 class="font-bold text-2xl mb-4">ðŸ“‹ Conditions</h3>
        <p class="mb-2">{t.annulation}</p>
        <p>{t.paiement}</p>
      </div>
    </section>

  </main>

  <footer class="bg-blue-900 text-white py-12 text-center">
    <p>&copy; 2026 Villa La Perle Bleue | <a href="mailto:contact@villalarochelle.com" class="hover:underline">Contact</a></p>
  </footer>
</body>
</html>
